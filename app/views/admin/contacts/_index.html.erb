<div class="row d-flex justify-content-center">
  <div class="col-md-8 mt-5">
    <table class="table table-hover">
      <tbody>
        <thead>
          <th class="bg-green text-white">投稿日</th>
          <th class="bg-green text-white">子ども</th>
          <th class="bg-green text-white"></th>
        </thead>
        <% check_list = {} %>
        <% @contacts.each do |contact| %>
          <%
            # 日付 + 子供の名前の組み合わせで文字を作る
            # その文字列が存在している場合、既に表示させているのでスキップするようにする
          %>
          <% date = contact.created_at.to_s(:detetime)%>

          <% target_key = contact.created_at.strftime("%Y-%m-%d " + contact.child.name) %>
          <% if check_list.key?(target_key) %>
            <% next %>
          <% end %>
          <% check_list[target_key] = true %>



          <% contact_contact = @contact_contacts.where(day: contact.created_at.day).last  %>
          <% if contact_contact.present? %>
            <tr>
              <td>
                <%# weeks = ["日","月","火","水","木","金","土"]%>
                <%# week = weeks[contact.created_at.wday]%>
                <%= link_to contact_contact_path(contact_contact.id, day: contact.created_at.day)  do %>
                  <p class="text-secondary mt-1 mb-0"><i class="fas fa-square"></i>&emsp;<%=I18n.l(contact.created_at, format: :short) %></p>
                <% end %>
              </td>
              <td>
                <span class ="text-secondary"><%= contact.child.name %></span>
              </td>
              <% if contact.status == "published" %>
              <td>
                <span class ="text-secondary"><%= contact.status_i18n %></span>
              </td>
              <% elsif contact.status == "draft" %>
              <td>
                <span class ="text-success"><%= contact.status_i18n %></span>
              </td>
             <% end %>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
</div>